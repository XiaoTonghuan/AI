# py语法

## python中的序列

|                | 列表（list） | 元组（tuple） | 字典（dict） | 集合（set） |
| :------------: | ------------ | ------------- | ------------ | ----------- |
|     界定符     | []           | ()            | {}           | {}          |
|      可变      | 是           | **否**        | 是           | 是          |
|      有序      | 是           | 是            | 否           | 否          |
|      下标      | 是           | 是            | Key          | **否**      |
|      重复      | 是           | 是            | Key不行      | 否          |
|    查找速度    | 慢           | 慢            | 快           | 快          |
| 新增和删除速度 | 尾部快       | 否            | 快           | 快          |

## 列表

常用方法

```python
lst*=n#列表元素重复n次
lst.append(x)#添加元素x到lst的尾部
lst+=L#lst.extend(L) 两者都是将lst扩展
lst.insert(index,x)#在index处插入一个x
lst.remove(x)#删除首次出现的x，其他元素向前缩进
lst.pop([index])#删除并返回下标为index的元素，默认是最后一个元素
lst.count(x)#返回指定元素的出现次数
lst.reverse()#逆序
lst.sort(key=None,reverse=False)#key用来指定排序依据，reverse表示正序还是拟序
lst.copy()#返回lst的潜复制
```

列表的创建

```python
#使用[]直接创建
a=['a',1,2]
b=[]
#使用list函数将元组、range对象、字符串或者其他类型的可迭代对象类型的数据转换为列表
c=list((3,5,6,9))#转换元组 [3,5,6,9]
d=list(range(1,10,2))#转换range [1,3,5,7,9]
e=lsit('hello,world')#转换字符串['h','e','l','l','o','w','o','r','l','d']
f=list()#空列表
```

列表的删除

```python
del a #当不再有其他列表对象指向时，内存自动释放，类似智能指针
del a[1] #解除当前列表对第一个元素的引用
aList = [3,5,7,9,11]
del aList[1]
aList
#[3, 7, 9, 11]
```

> P.S.注意一个常见的错误

```python
x = [1,2,1,2,1,1,1]
for item in x:
    if item == 1:
        x.remove(item)
#注意该程序并不能删除掉x中所有的1，因为每删除一个元素都会导致当前下标元素的值发生变化
#正确的删除
x = [1,2,1,2,1,1,1]
for item in x[::]:      #切片
    if item == 1:
        x.remove(item)
x = [1,2,1,2,1,1,1]
for i in range(len(x)-1,-1,-1):         #从后往前删
    if x[i]==1:
        del x[i]
```

列表元素的增加

```python
a=a+[7]#完成两个列表的拼接
a.append(7)#直接添加一个元素
a+='1234'#将‘1’，‘2’，‘3’，‘4’加入列表
```

列表中包含的是元素值的引用

```python
>>> a = [1,2,4]
>>> b = [1,2,3]
>>> a == b
False
>>> id(a) == id(b)
False
>>> id(a[0]) == id(b[0]) #说明a和b中的第一个元素指的是同一个元素
True
>>> a = [1,2,3]
>>> id(a)
25289752
>>> a.append(4)#添加值不会改变初始地址
>>> id(a)
25289752
>>> a.remove(3)#删除值也不会改变a的地址
>>> a
[1, 2, 4]
>>> id(a)
25289752
>>> a[0] = 5
>>> a
[5, 2, 4]
>>> id(a)
25289752
#结论append、extend、remove 均属于原地操作
```

应尽量从尾部来扩展或者删除一个元素

使用乘法扩展列表的内容，结果是列表的元素重复的被添加到列表里

```python
a=[1]
a=a*3 #a=[1,1,1]
#值得注意的是，这里乘法会导致a中所有的元素是对同一块内存的引用，修改其中一个就会导致另一个的修改！
>>> x = [[None] * 2] * 3
   >>> x
    [[None, None], [None, None], [None, None]]
   >>> x[0][0] = 5
   >>> x
    [[5, None], [5, None], [5, None]]

```

列表的访问和计数

```python
a[1]#下标访问
a.index(x)#index函数访问
```

切片

```python
ls[i]=x
ls[i:j]=l1#将指定的部分[前闭后开！)替换为一个新的列表
ls[i:j:k]=l1#将指定的部分（前闭后开步数为k，替换为一个新的列表）
del a[i:j]#删除从i到j的所有元素（前闭后开）等价于a[i:j]=[]
del a[i:j:k]#删除从i到j步数为k的所有数据

>>> aList = [3, 4, 5, 6, 7, 9, 11, 13, 15, 17]
>>> aList[::]                            #返回包含所有元素的新列表
[3, 4, 5, 6, 7, 9, 11, 13, 15, 17]
>>> aList[::-1]                          #逆序的所有元素
[17, 15, 13, 11, 9, 7, 6, 5, 4, 3]
>>> aList[::2]                           #偶数位置，隔一个取一个
[3, 5, 7, 11, 15]
>>> aList[1::2]                          #奇数位置，隔一个取一个
[4, 6, 9, 13, 17]
>>> aList[3::]                           #从下标3开始的所有元素
[6, 7, 9, 11, 13, 15, 17]
>>> aList[3:6]                           #下标在[3, 6)之间的所有元素
[6, 7, 9]
>>> aList[0:100:1]                       #前100个元素，自动截断
[3, 4, 5, 6, 7, 9, 11, 13, 15, 17]
>>> aList[100:]                          #下标100之后的所有元素，自动截断
[]
>>> aList[100]                           #直接使用下标访问会发生越界

>>> aList = [3, 5, 7]
>>> aList[:2] = [1, 2]            #替换前2个元素
>>> aList
[1, 2, 7]

>>> aList = list(range(10))
>>> aList
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> aList[::2] = [0]*5            #替换偶数位置上的元素
>>> aList
[0, 1, 0, 3, 0, 5, 0, 7, 0, 9]

>>> aList = [3,5,7,9,11]
>>> del aList[1::2] 
>>> aList
[3, 7, 11]
```

- 切片返回的是列表元素的潜复制，所以修改元素是会影响到原来的列表的

深复制

```python
>>> import copy
>>> x = [1, 2, [3, 4]]
>>> y = copy.deepcopy(x) 
>>> x[2].append(5)
>>> y.append(6)
>>> y
[1, 2, [3, 4], 6]
>>> x
[1, 2, [3, 4, 5]]
#这样的h
```

用于序列操作的常用函数

sum函数

```python
sum()#对列表内元素进行求和运算，对于非数值型列表需要指定start参数
sum(range(1, 11))    #sum()函数的start参数默认为0
sum([1,2],3)	#相当于3+sum([1,2])
```

zip函数



- 列表中的数据类型可以不同
- 
- 字符串
- range、map、zip、enumerate等

## 关键字

- 关键字：as
  - 对导入的包起一个别名，如 ``import numpy as np``
  
- 关键字 assert
  - 条件不满足程序运行的情况下直接返回错误，而不必等待程序运行后出现崩溃的情况。
  
- **zip()** 

  用于将可迭代的对象作为参数，将对象中对应的元素打包成一个个元组，然后返回由这些元组组成的列表。

  如果各个迭代器的元素个数不一致，则返回列表长度与最短的对象相同，利用 * 号操作符，可以将元组解压为列表。

  ```python
  >>>a = [1,2,3]
  >>> b = [4,5,6]
  >>> c = [4,5,6,7,8]
  >>> zipped = zip(a,b)     # 打包为元组的列表
  [(1, 4), (2, 5), (3, 6)]
  >>> zip(a,c)              # 元素个数与最短的列表一致
  [(1, 4), (2, 5), (3, 6)]
  >>> zip(*zipped)          # 与 zip 相反，*zipped 可理解为解压，返回二维矩阵式
  [(1, 2, 3), (4, 5, 6)]
  ```

- *的用法

  - 用作乘法

  - 用作乘方

  - 用于解包

    ```python
    def d(x,y,z):
        return (x,y,z)
    a=[1,2,3]
    d(*a)#将一个列表转化为实参
  
- **的作用
  
    - 用于函数参数，将传入的参数打包为字典

    	```python
    	def demo(**p):
        	for i in p.items():
            	print(i)
    	demo(x=1,y=2)
    	#('x',1)
    	#('y',2)
    	```
    	
    - 用于解包字典
    
      ```python
      dic={'a':1,'b':2,'c':}
      str='{a},{b},{c}'.format(**dic)
      ```
    
- 

# numpy

## array

这个库是科学计算基础库

创建数组，可以将一个列表作类型传入，得到一个array

```python
a = np.array([1,2,3,4])
print(a)
print(type(a)) #type可以返回类型,ndarray

#二维数组
b = np.array([[1,2],[1,2]]) #
#有多个参数
np.array([1,2,3],dtype=float,ndmin=3) #数据类型和维数
```

可以通过arange的方式创建array

```python
a=list(range(1,9,2)) #[),step,默认步长是1
a=np.arange(1,11,2)#返回一个array类型
np.arange(1,22,2,dtype=float)
```

其他的创建数组的方式

```python
#zeros
np.zeros(shape,dtype=float,order='C')#创建全是0的数组,第三个参数是type
#如
np.zero(5)
np.zero((2,3))

#ones
a=np.ones(1)#数据初始化为1
np.empty(1)#数据初始化为任意
```



array的对象属性

<img src=".assets/image-20220202104029564.png" alt="image-20220202104029564" style="zoom:80%;" />

## 切片和索引

一维数组中切片和索引的使用

```python
a=np.arange(1,9,2)#先创建一个数组
#索引
y = a[-1] #倒数第一个
y = a[-3] #倒数第三个
#切片
y = a[:]#从开始到结尾
y = a[1:3]#从索引1到3同样是左闭右开
y = a[1:6:2]#步长为2
y = a[::-1]#从开始到结尾，步长为-1，即反向输出
y = a[-5:-2]#从-5到-2
```

二维数组中切片和索引的使用

```python
#索引
a = np.array([[1,2],[1,3,2]])
a[2] #获取第三行
a[2][1] #获取第3行的第2个元素
#切片
[对行进行切片,对列进行切片]
a[:,:]#获取所有行所有列
a[:,2]#获取所有行第3列p
a[:,0:2]#获取所有行第1，2列
a[1::2,::2]#获取偶数行奇数列
#使用坐标获取元素
a[1,2] #获取第2行第3列的元素a[1][2]相同
a[(1,2),(3,4)] #获取多个元素第2行第4个和第3行第5个
a[::-1]#行倒叙
a[::-1,::-1]#列倒叙
```

三个点

```python
a[:,:,None] 和a[…, None] 等价
```

省略前面两维的数据

# cv,torch

- ``vc = VedioCapture(0)``

  - 参数是0，表示打开摄像头，参数是路径，表示打开文件

- ``ret,frame = vc.read()``

  vc.read()按帧读取视频，ret,frame是获cap.read()方法的两个返回值。其中ret是布尔值，如果读取帧是正确的则返回True，如果文件读取到结尾，它的返回值就为False。frame就是每一帧的图像，是个**三维矩阵**（m，n，3）m表示高，n表示宽，3表示RGB。

- ``letterbox(img,new_shape=(a,b))``